@page "/"
@using Microsoft.EntityFrameworkCore
@inject IDbContextFactory<MyRssClient.Data.MyContext> DbFactory
@inject MyRssClient.Services.GetDataService GetDataService
@inject NavigationManager Navigation

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

This is just a show of this project. It has no user-logins, and every change is visible to all. Feel free to try it out, but consider that other people might be here at the same time.
<br />
<br />

<ul class="nav nav-tabs">
    @foreach (var rankingName in GetDataService.GetRankingNames()) {
        <li class="nav-item nav-link @(SelectedAlgo == rankingName ? "active" : string.Empty)" @onclick="() => chooseRanking(rankingName)">@rankingName</li>
    }
</ul>

<div class="container mx-0" style="max-width: 63rem">
    <div class="d-flex flex-column flex-xl-row flex-wrap gap-4 mb-3">
        @foreach (var post in itemsToShow.Take(NumberOfPostsToDisplayPerPage)) {
            <MyRssClient.Components.Pages.Helpers.ShowPost Post="post" />
        }
    </div>
</div>

@code {
    private ICollection<MyRssClient.Models.Post> itemsToShow { get; set; } = [];
    private int NumberOfPostsToDisplayPerPage = 10;
    private string SelectedAlgo = string.Empty;

    private async Task chooseRanking(string selectedAlgo) {
        SelectedAlgo = selectedAlgo;
        itemsToShow = await GetDataService.GetData(selectedAlgo, NumberOfPostsToDisplayPerPage);
    }

    protected override void OnAfterRender(bool firstRender) {
        base.OnAfterRender(firstRender);
        var tagesschau = "34d2e55b-a6fe-4b14-9e67-262e86a784f0";
        var almayadeen = "ba2e612c-ea87-4594-a0bf-bf82745e2efb";
        // NavigationManager.NavigateTo($"/subscription/{tagesschau}");
        // NavigationManager.NavigateTo("/channels/");
        // NavigationManager.NavigateTo("/channels/create");
        // NavigationManager.NavigateTo($"/movies/details?id={id}");

    }
}
